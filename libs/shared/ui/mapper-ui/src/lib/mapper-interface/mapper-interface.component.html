
<div fxLayout = "row" fxLayoutAlign="space-around center">
  <div fxFlex = "95">
<div class="data-source-grid" cdkDropListGroup >
  <div>
    <h2>All Sources {{options.length}}</h2>
    <mat-progress-bar mode="indeterminate" *ngIf = "allSourcesLoading"></mat-progress-bar>
    <div   *ngFor="let item of options">
      <mat-expansion-panel class="full-width">
        <mat-expansion-panel-header [innerHTML]= "item.name | highlight : searchTerm">

        </mat-expansion-panel-header>
        <div
             *ngFor="let field of item.fields">
          <mat-checkbox (change)="selectField($event, item.name, field)"><span [innerHTML] = "field | highlight:searchTerm"></span></mat-checkbox>
        </div>
      </mat-expansion-panel>
    </div>
  </div>
    <!--
    <div
      #optionsList = "cdkDropList"
      cdkDropList
      [cdkDropListData]="options"
      [cdkDropListConnectedTo] = "[mappedList]"
      [cdkDropListEnterPredicate]="sourcePredicate"
      class="mapper-list"
      (cdkDropListDropped)="drop($event)">
      <div class="mapper-box"
           *ngFor="let item of options"
           [cdkDragData]="item"
           cdkDrag>
        {{item.name}} ({{item.fields.length}} fields)
      </div>
    </div>-->

  <!--<div>
    <h2>Selected Sources</h2>
    <div
        #mappedList = "cdkDropList"
        cdkDropList
      [cdkDropListData]="mapped"
      [cdkDropListConnectedTo] = "[optionsList]"
        [cdkDropListEnterPredicate]="sourcePredicate"
        class="mapper-list"
      (cdkDropListDropped)="drop($event)">
      <div class="mapper-box"
           *ngFor="let item of mapped"
           [cdkDragData]="item"
           cdkDrag>
        <mat-expansion-panel class="full-width" [expanded]="true">
          <mat-expansion-panel-header>
            {{item.name}}
&lt;!&ndash;
            <button mat-icon-button (click) = "remove($event, item)"><mat-icon>close</mat-icon></button>
&ndash;&gt;
          </mat-expansion-panel-header>
          <div class="mapper-box"
               *ngFor="let field of item.fields">
            <mat-checkbox (change)="selectField($event, item.name, field)">{{field}}</mat-checkbox>
          </div>
        </mat-expansion-panel>
      </div>
    </div>
  </div>-->
  <div class = "selectedFields">
    <h2>Selected Fields</h2>
    <div>
      <div class=""
           *ngFor="let item of mappedFields"
           [cdkDragData]="item"
           cdkDrag
      >
        <div fxLayout="row">
          {{item.name}}
        </div>
        <div fxLayout = "row wrap" fxLayoutAlign = "space-around start">
          <div fxFlex = 100 *ngFor = "let field of item.fields">{{field}}</div><br>
        </div>
        <br>
<!--
        <button mat-icon-button (click) = "remove($event, item)"><mat-icon>close</mat-icon></button>
-->
      </div>
    </div>
  </div>
</div>
</div>
  </div>
